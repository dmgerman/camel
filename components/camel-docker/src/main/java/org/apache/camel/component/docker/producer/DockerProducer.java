begin_unit|revision:0.9.5;language:Java;cregit-version:0.0.1
begin_comment
comment|/*  * Licensed to the Apache Software Foundation (ASF) under one or more  * contributor license agreements.  See the NOTICE file distributed with  * this work for additional information regarding copyright ownership.  * The ASF licenses this file to You under the Apache License, Version 2.0  * (the "License"); you may not use this file except in compliance with  * the License.  You may obtain a copy of the License at  *  *      http://www.apache.org/licenses/LICENSE-2.0  *  * Unless required by applicable law or agreed to in writing, software  * distributed under the License is distributed on an "AS IS" BASIS,  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  * See the License for the specific language governing permissions and  * limitations under the License.  */
end_comment

begin_package
DECL|package|org.apache.camel.component.docker.producer
package|package
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|component
operator|.
name|docker
operator|.
name|producer
package|;
end_package

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|InputStream
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|DockerClient
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|AuthCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|CommitCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|ConnectToNetworkCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|ContainerDiffCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|CopyArchiveFromContainerCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|CreateContainerCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|CreateImageCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|CreateNetworkCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|ExecCreateCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|InfoCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|InspectContainerCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|InspectImageCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|KillContainerCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|ListContainersCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|ListImagesCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|PauseContainerCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|PingCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|RemoveContainerCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|RemoveImageCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|RemoveNetworkCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|RestartContainerCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|SearchImagesCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|StartContainerCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|StopContainerCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|TagImageCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|TopContainerCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|UnpauseContainerCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|command
operator|.
name|VersionCmd
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|model
operator|.
name|AuthConfig
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|model
operator|.
name|Capability
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|model
operator|.
name|ExposedPort
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|model
operator|.
name|ExposedPorts
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|model
operator|.
name|HostConfig
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|model
operator|.
name|Mount
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|model
operator|.
name|Volume
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|model
operator|.
name|Volumes
import|;
end_import

begin_import
import|import
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|model
operator|.
name|VolumesFrom
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|Exchange
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|Message
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|component
operator|.
name|docker
operator|.
name|DockerClientFactory
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|component
operator|.
name|docker
operator|.
name|DockerComponent
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|component
operator|.
name|docker
operator|.
name|DockerConfiguration
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|component
operator|.
name|docker
operator|.
name|DockerConstants
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|component
operator|.
name|docker
operator|.
name|DockerEndpoint
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|component
operator|.
name|docker
operator|.
name|DockerHelper
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|component
operator|.
name|docker
operator|.
name|DockerOperation
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|component
operator|.
name|docker
operator|.
name|exception
operator|.
name|DockerException
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|support
operator|.
name|DefaultProducer
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|camel
operator|.
name|util
operator|.
name|ObjectHelper
import|;
end_import

begin_import
import|import
name|org
operator|.
name|slf4j
operator|.
name|Logger
import|;
end_import

begin_import
import|import
name|org
operator|.
name|slf4j
operator|.
name|LoggerFactory
import|;
end_import

begin_import
import|import static
name|com
operator|.
name|github
operator|.
name|dockerjava
operator|.
name|api
operator|.
name|model
operator|.
name|HostConfig
operator|.
name|newHostConfig
import|;
end_import

begin_comment
comment|/**  * The Docker producer.  */
end_comment

begin_class
DECL|class|DockerProducer
specifier|public
class|class
name|DockerProducer
extends|extends
name|DefaultProducer
block|{
DECL|field|LOGGER
specifier|private
specifier|static
specifier|final
name|Logger
name|LOGGER
init|=
name|LoggerFactory
operator|.
name|getLogger
argument_list|(
name|DockerProducer
operator|.
name|class
argument_list|)
decl_stmt|;
DECL|field|configuration
specifier|private
name|DockerConfiguration
name|configuration
decl_stmt|;
DECL|field|component
specifier|private
name|DockerComponent
name|component
decl_stmt|;
DECL|method|DockerProducer (DockerEndpoint endpoint)
specifier|public
name|DockerProducer
parameter_list|(
name|DockerEndpoint
name|endpoint
parameter_list|)
block|{
name|super
argument_list|(
name|endpoint
argument_list|)
expr_stmt|;
name|this
operator|.
name|configuration
operator|=
name|endpoint
operator|.
name|getConfiguration
argument_list|()
expr_stmt|;
name|this
operator|.
name|component
operator|=
operator|(
name|DockerComponent
operator|)
name|endpoint
operator|.
name|getComponent
argument_list|()
expr_stmt|;
block|}
DECL|method|process (Exchange exchange)
specifier|public
name|void
name|process
parameter_list|(
name|Exchange
name|exchange
parameter_list|)
throws|throws
name|Exception
block|{
name|Message
name|message
init|=
name|exchange
operator|.
name|getIn
argument_list|()
decl_stmt|;
name|DockerClient
name|client
init|=
name|DockerClientFactory
operator|.
name|getDockerClient
argument_list|(
name|component
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|)
decl_stmt|;
name|DockerOperation
name|operation
init|=
name|configuration
operator|.
name|getOperation
argument_list|()
decl_stmt|;
name|Object
name|result
init|=
literal|null
decl_stmt|;
switch|switch
condition|(
name|operation
condition|)
block|{
comment|/** General **/
case|case
name|AUTH
case|:
name|result
operator|=
name|executeAuthRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|INFO
case|:
name|result
operator|=
name|executeInfoRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|PING
case|:
name|result
operator|=
name|executePingRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|VERSION
case|:
name|result
operator|=
name|executeVersionRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|CREATE_IMAGE
case|:
name|result
operator|=
name|executeCreateImageRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|INSPECT_IMAGE
case|:
name|result
operator|=
name|executeInspectImageRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|LIST_IMAGES
case|:
name|result
operator|=
name|executeListImagesRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|REMOVE_IMAGE
case|:
name|result
operator|=
name|executeRemoveImageRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|SEARCH_IMAGES
case|:
name|result
operator|=
name|executeSearchImageRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|TAG_IMAGE
case|:
name|result
operator|=
name|executeTagImageRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|COMMIT_CONTAINER
case|:
name|result
operator|=
name|executeCommitContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|COPY_FILE_CONTAINER
case|:
name|result
operator|=
name|executeCopyFileContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|CREATE_CONTAINER
case|:
name|result
operator|=
name|executeCreateContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|DIFF_CONTAINER
case|:
name|result
operator|=
name|executeDiffContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|INSPECT_CONTAINER
case|:
name|result
operator|=
name|executeInspectContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|LIST_CONTAINERS
case|:
name|result
operator|=
name|executeListContainersRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|KILL_CONTAINER
case|:
name|result
operator|=
name|executeKillContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|PAUSE_CONTAINER
case|:
name|result
operator|=
name|executePauseContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|REMOVE_CONTAINER
case|:
name|result
operator|=
name|executeRemoveContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|RESTART_CONTAINER
case|:
name|result
operator|=
name|executeRestartContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|START_CONTAINER
case|:
name|result
operator|=
name|executeStartContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|STOP_CONTAINER
case|:
name|result
operator|=
name|executeStopContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|TOP_CONTAINER
case|:
name|result
operator|=
name|executeTopContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|UNPAUSE_CONTAINER
case|:
name|result
operator|=
name|executeUnpauseContainerRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|CREATE_NETWORK
case|:
name|result
operator|=
name|executeCreateNetworkRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|REMOVE_NETWORK
case|:
name|result
operator|=
name|executeRemoveNetworkRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|CONNECT_NETWORK
case|:
name|result
operator|=
name|executeConnectToNetworkRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
case|case
name|EXEC_CREATE
case|:
name|result
operator|=
name|executeExecCreateRequest
argument_list|(
name|client
argument_list|,
name|message
argument_list|)
operator|.
name|exec
argument_list|()
expr_stmt|;
break|break;
default|default:
throw|throw
operator|new
name|DockerException
argument_list|(
literal|"Invalid operation: "
operator|+
name|operation
argument_list|)
throw|;
block|}
comment|// If request included a response, set as body
if|if
condition|(
name|result
operator|!=
literal|null
condition|)
block|{
name|exchange
operator|.
name|getIn
argument_list|()
operator|.
name|setBody
argument_list|(
name|result
argument_list|)
expr_stmt|;
block|}
block|}
comment|/*********************      * General Requests      ********************/
comment|/**      * Produces a Authorization request      *      * @param client      * @param message      * @return      */
DECL|method|executeAuthRequest (DockerClient client, Message message)
specifier|private
name|AuthCmd
name|executeAuthRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Auth Request"
argument_list|)
expr_stmt|;
name|AuthCmd
name|authCmd
init|=
name|client
operator|.
name|authCmd
argument_list|()
decl_stmt|;
name|AuthConfig
name|authConfig
init|=
name|client
operator|.
name|authConfig
argument_list|()
decl_stmt|;
if|if
condition|(
name|authCmd
operator|!=
literal|null
condition|)
block|{
name|authCmd
operator|.
name|withAuthConfig
argument_list|(
name|authConfig
argument_list|)
expr_stmt|;
block|}
return|return
name|authCmd
return|;
block|}
comment|/**      * Produces a platform information request      *      * @param client      * @param message      * @return      */
DECL|method|executeInfoRequest (DockerClient client, Message message)
specifier|private
name|InfoCmd
name|executeInfoRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Info Request"
argument_list|)
expr_stmt|;
name|InfoCmd
name|infoCmd
init|=
name|client
operator|.
name|infoCmd
argument_list|()
decl_stmt|;
return|return
name|infoCmd
return|;
block|}
comment|/**      * Executes a ping platform request      *      * @param client      * @param message      * @return      */
DECL|method|executePingRequest (DockerClient client, Message message)
specifier|private
name|PingCmd
name|executePingRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Ping Request"
argument_list|)
expr_stmt|;
name|PingCmd
name|pingCmd
init|=
name|client
operator|.
name|pingCmd
argument_list|()
decl_stmt|;
return|return
name|pingCmd
return|;
block|}
comment|/**      * Executes a platform version request      *      * @param client      * @param message      * @return      */
DECL|method|executeVersionRequest (DockerClient client, Message message)
specifier|private
name|VersionCmd
name|executeVersionRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Version Request"
argument_list|)
expr_stmt|;
name|VersionCmd
name|versionCmd
init|=
name|client
operator|.
name|versionCmd
argument_list|()
decl_stmt|;
return|return
name|versionCmd
return|;
block|}
comment|/*********************      * Image Requests      ********************/
comment|/**      * Performs a create image request      *      * @param client      * @param message      * @return      */
DECL|method|executeCreateImageRequest (DockerClient client, Message message)
specifier|private
name|CreateImageCmd
name|executeCreateImageRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Create Image Request"
argument_list|)
expr_stmt|;
name|String
name|repository
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_REPOSITORY
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|InputStream
name|inputStream
init|=
name|message
operator|.
name|getBody
argument_list|(
name|InputStream
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|repository
operator|==
literal|null
operator|||
name|inputStream
operator|==
literal|null
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Inputstream must be present on message body and repository must be specified"
argument_list|)
throw|;
block|}
name|CreateImageCmd
name|createImageCmd
init|=
name|client
operator|.
name|createImageCmd
argument_list|(
name|repository
argument_list|,
name|inputStream
argument_list|)
decl_stmt|;
return|return
name|createImageCmd
return|;
block|}
comment|/**      * Produces a inspect image request      *      * @param client      * @param message      * @return      */
DECL|method|executeInspectImageRequest (DockerClient client, Message message)
specifier|private
name|InspectImageCmd
name|executeInspectImageRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Inspect Image Request"
argument_list|)
expr_stmt|;
name|String
name|imageId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_IMAGE_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|imageId
argument_list|,
literal|"Image ID must be specified"
argument_list|)
expr_stmt|;
name|InspectImageCmd
name|inspectImageCmd
init|=
name|client
operator|.
name|inspectImageCmd
argument_list|(
name|imageId
argument_list|)
decl_stmt|;
return|return
name|inspectImageCmd
return|;
block|}
comment|/**      * Performs a list images request      *      * @param client      * @param message      * @return      */
DECL|method|executeListImagesRequest (DockerClient client, Message message)
specifier|private
name|ListImagesCmd
name|executeListImagesRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Images List Request"
argument_list|)
expr_stmt|;
name|ListImagesCmd
name|listImagesCmd
init|=
name|client
operator|.
name|listImagesCmd
argument_list|()
decl_stmt|;
name|String
name|filter
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_FILTER
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|filter
operator|!=
literal|null
condition|)
block|{
name|listImagesCmd
operator|.
name|withLabelFilter
argument_list|(
name|filter
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|showAll
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_SHOW_ALL
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|showAll
operator|!=
literal|null
condition|)
block|{
name|listImagesCmd
operator|.
name|withShowAll
argument_list|(
name|showAll
argument_list|)
expr_stmt|;
block|}
return|return
name|listImagesCmd
return|;
block|}
comment|/**      * Produces a remove image request      *      * @param client      * @param message      * @return      */
DECL|method|executeRemoveImageRequest (DockerClient client, Message message)
specifier|private
name|RemoveImageCmd
name|executeRemoveImageRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Remove Image Request"
argument_list|)
expr_stmt|;
name|String
name|imageId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_IMAGE_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|imageId
argument_list|,
literal|"Image ID must be specified"
argument_list|)
expr_stmt|;
name|RemoveImageCmd
name|removeImagesCmd
init|=
name|client
operator|.
name|removeImageCmd
argument_list|(
name|imageId
argument_list|)
decl_stmt|;
name|Boolean
name|force
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_FORCE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|force
operator|!=
literal|null
condition|)
block|{
name|removeImagesCmd
operator|.
name|withForce
argument_list|(
name|force
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|noPrune
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_NO_PRUNE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|noPrune
operator|!=
literal|null
condition|)
block|{
name|removeImagesCmd
operator|.
name|withNoPrune
argument_list|(
name|noPrune
argument_list|)
expr_stmt|;
block|}
return|return
name|removeImagesCmd
return|;
block|}
comment|/**      * Produces a search image request      *      * @param client      * @param message      * @return      */
DECL|method|executeSearchImageRequest (DockerClient client, Message message)
specifier|private
name|SearchImagesCmd
name|executeSearchImageRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Search Image Request"
argument_list|)
expr_stmt|;
name|String
name|term
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_TERM
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|term
argument_list|,
literal|"Term must be specified"
argument_list|)
expr_stmt|;
name|SearchImagesCmd
name|searchImagesCmd
init|=
name|client
operator|.
name|searchImagesCmd
argument_list|(
name|term
argument_list|)
decl_stmt|;
return|return
name|searchImagesCmd
return|;
block|}
comment|/**      * Produces a tag image request      *      * @param client      * @param message      * @return      */
DECL|method|executeTagImageRequest (DockerClient client, Message message)
specifier|private
name|TagImageCmd
name|executeTagImageRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Tag Image Request"
argument_list|)
expr_stmt|;
name|String
name|imageId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_IMAGE_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|String
name|repository
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_REPOSITORY
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|String
name|tag
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_TAG
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|imageId
operator|==
literal|null
operator|||
name|repository
operator|==
literal|null
operator|||
name|tag
operator|==
literal|null
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"ImageId, repository and tag must be specified"
argument_list|)
throw|;
block|}
name|TagImageCmd
name|tagImageCmd
init|=
name|client
operator|.
name|tagImageCmd
argument_list|(
name|imageId
argument_list|,
name|repository
argument_list|,
name|tag
argument_list|)
decl_stmt|;
name|Boolean
name|force
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_FORCE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|force
operator|!=
literal|null
condition|)
block|{
name|tagImageCmd
operator|.
name|withForce
argument_list|(
name|force
argument_list|)
expr_stmt|;
block|}
return|return
name|tagImageCmd
return|;
block|}
comment|/*********************      * Container Requests      ********************/
comment|/**      * Produces a commit container request      *      * @param client      * @param message      * @return      * @throws DockerException      */
DECL|method|executeCommitContainerRequest (DockerClient client, Message message)
specifier|private
name|CommitCmd
name|executeCommitContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
throws|throws
name|DockerException
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Commit Container Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|containerId
argument_list|,
literal|"Container ID must be specified"
argument_list|)
expr_stmt|;
name|CommitCmd
name|commitCmd
init|=
name|client
operator|.
name|commitCmd
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
name|String
name|author
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_AUTHOR
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|author
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withAuthor
argument_list|(
name|author
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|attachStdErr
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_ATTACH_STD_ERR
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|attachStdErr
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withAttachStderr
argument_list|(
name|attachStdErr
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|attachStdIn
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_ATTACH_STD_IN
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|attachStdIn
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withAttachStdin
argument_list|(
name|attachStdIn
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|attachStdOut
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_ATTACH_STD_OUT
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|attachStdOut
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withAttachStdout
argument_list|(
name|attachStdOut
argument_list|)
expr_stmt|;
block|}
name|String
index|[]
name|cmds
init|=
name|DockerHelper
operator|.
name|parseDelimitedStringHeader
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CMD
argument_list|,
name|message
argument_list|)
decl_stmt|;
if|if
condition|(
name|cmds
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withCmd
argument_list|(
name|cmds
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|disableNetwork
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_DISABLE_NETWORK
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|disableNetwork
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withDisableNetwork
argument_list|(
name|disableNetwork
argument_list|)
expr_stmt|;
block|}
name|String
index|[]
name|envs
init|=
name|DockerHelper
operator|.
name|parseDelimitedStringHeader
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_ENV
argument_list|,
name|message
argument_list|)
decl_stmt|;
if|if
condition|(
name|envs
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withEnv
argument_list|(
name|envs
argument_list|)
expr_stmt|;
block|}
name|ExposedPorts
name|exposedPorts
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_EXPOSED_PORTS
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|ExposedPorts
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|exposedPorts
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withExposedPorts
argument_list|(
name|exposedPorts
argument_list|)
expr_stmt|;
block|}
name|String
name|hostname
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_HOSTNAME
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|hostname
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withHostname
argument_list|(
name|hostname
argument_list|)
expr_stmt|;
block|}
name|Integer
name|memory
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_MEMORY
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Integer
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|memory
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withMemory
argument_list|(
name|memory
argument_list|)
expr_stmt|;
block|}
name|Integer
name|memorySwap
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_MEMORY_SWAP
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Integer
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|memorySwap
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withMemorySwap
argument_list|(
name|memorySwap
argument_list|)
expr_stmt|;
block|}
name|String
name|msg
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_MESSAGE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|msg
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withMessage
argument_list|(
name|msg
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|openStdIn
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_OPEN_STD_IN
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|openStdIn
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withOpenStdin
argument_list|(
name|openStdIn
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|pause
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_PAUSE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|pause
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withPause
argument_list|(
name|pause
argument_list|)
expr_stmt|;
block|}
name|String
index|[]
name|portSpecs
init|=
name|DockerHelper
operator|.
name|parseDelimitedStringHeader
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_PORT_SPECS
argument_list|,
name|message
argument_list|)
decl_stmt|;
if|if
condition|(
name|portSpecs
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withPortSpecs
argument_list|(
name|portSpecs
argument_list|)
expr_stmt|;
block|}
name|String
name|repository
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_REPOSITORY
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|repository
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withRepository
argument_list|(
name|repository
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|stdInOnce
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_STD_IN_ONCE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|stdInOnce
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withStdinOnce
argument_list|(
name|stdInOnce
argument_list|)
expr_stmt|;
block|}
name|String
name|tag
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_TAG
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|tag
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withTag
argument_list|(
name|tag
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|tty
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_TTY
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|tty
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withTty
argument_list|(
name|tty
argument_list|)
expr_stmt|;
block|}
name|String
name|user
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_USER
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|user
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withUser
argument_list|(
name|user
argument_list|)
expr_stmt|;
block|}
name|Volumes
name|volumes
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_VOLUMES
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Volumes
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|volumes
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withVolumes
argument_list|(
name|volumes
argument_list|)
expr_stmt|;
block|}
name|String
name|workingDir
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_WORKING_DIR
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|workingDir
operator|!=
literal|null
condition|)
block|{
name|commitCmd
operator|.
name|withWorkingDir
argument_list|(
name|workingDir
argument_list|)
expr_stmt|;
block|}
return|return
name|commitCmd
return|;
block|}
comment|/**      * Produces a copy file/folder from container request      *      * @param client      * @param message      * @return      */
DECL|method|executeCopyFileContainerRequest (DockerClient client, Message message)
specifier|private
name|CopyArchiveFromContainerCmd
name|executeCopyFileContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Copy File/Folder Container Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|String
name|resource
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_RESOURCE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|containerId
operator|==
literal|null
operator|||
name|resource
operator|==
literal|null
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Container ID and Resource must be specified"
argument_list|)
throw|;
block|}
name|CopyArchiveFromContainerCmd
name|copyArchiveFromContainerCmd
init|=
name|client
operator|.
name|copyArchiveFromContainerCmd
argument_list|(
name|containerId
argument_list|,
name|resource
argument_list|)
decl_stmt|;
name|String
name|hostPath
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_HOST_PATH
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|hostPath
operator|!=
literal|null
condition|)
block|{
name|copyArchiveFromContainerCmd
operator|.
name|withHostPath
argument_list|(
name|hostPath
argument_list|)
expr_stmt|;
block|}
return|return
name|copyArchiveFromContainerCmd
return|;
block|}
comment|/**      * Produce a create container request      *      * @param client      * @param message      * @return      */
DECL|method|executeCreateContainerRequest (DockerClient client, Message message)
specifier|private
name|CreateContainerCmd
name|executeCreateContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Create Container Request"
argument_list|)
expr_stmt|;
name|String
name|image
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_IMAGE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|image
argument_list|,
literal|"Image must be specified"
argument_list|)
expr_stmt|;
name|CreateContainerCmd
name|createContainerCmd
init|=
name|client
operator|.
name|createContainerCmd
argument_list|(
name|image
argument_list|)
decl_stmt|;
name|createContainerCmd
operator|.
name|withHostConfig
argument_list|(
name|newHostConfig
argument_list|()
argument_list|)
expr_stmt|;
name|Boolean
name|attachStdErr
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_ATTACH_STD_ERR
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|attachStdErr
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withAttachStderr
argument_list|(
name|attachStdErr
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|attachStdIn
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_ATTACH_STD_IN
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|attachStdIn
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withAttachStdin
argument_list|(
name|attachStdIn
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|attachStdOut
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_ATTACH_STD_OUT
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|attachStdOut
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withAttachStdout
argument_list|(
name|attachStdOut
argument_list|)
expr_stmt|;
block|}
name|Capability
index|[]
name|capAdd
init|=
name|DockerHelper
operator|.
name|getArrayProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CAP_ADD
argument_list|,
name|message
argument_list|,
name|Capability
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|capAdd
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|getHostConfig
argument_list|()
operator|.
name|withCapAdd
argument_list|(
name|capAdd
argument_list|)
expr_stmt|;
block|}
name|Capability
index|[]
name|capDrop
init|=
name|DockerHelper
operator|.
name|getArrayProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CAP_DROP
argument_list|,
name|message
argument_list|,
name|Capability
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|capDrop
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|getHostConfig
argument_list|()
operator|.
name|withCapDrop
argument_list|(
name|capDrop
argument_list|)
expr_stmt|;
block|}
name|String
index|[]
name|cmd
init|=
name|DockerHelper
operator|.
name|parseDelimitedStringHeader
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CMD
argument_list|,
name|message
argument_list|)
decl_stmt|;
if|if
condition|(
name|cmd
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withCmd
argument_list|(
name|cmd
argument_list|)
expr_stmt|;
block|}
name|Integer
name|cpuShares
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CPU_SHARES
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Integer
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|cpuShares
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|getHostConfig
argument_list|()
operator|.
name|withCpuShares
argument_list|(
name|cpuShares
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|disableNetwork
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_DISABLE_NETWORK
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|disableNetwork
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withNetworkDisabled
argument_list|(
name|disableNetwork
argument_list|)
expr_stmt|;
block|}
name|String
index|[]
name|dns
init|=
name|DockerHelper
operator|.
name|parseDelimitedStringHeader
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_DNS
argument_list|,
name|message
argument_list|)
decl_stmt|;
if|if
condition|(
name|dns
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|getHostConfig
argument_list|()
operator|.
name|withDns
argument_list|(
name|dns
argument_list|)
expr_stmt|;
block|}
name|String
name|domainName
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_DOMAIN_NAME
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|domainName
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withDomainName
argument_list|(
name|domainName
argument_list|)
expr_stmt|;
block|}
name|String
index|[]
name|env
init|=
name|DockerHelper
operator|.
name|parseDelimitedStringHeader
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_ENV
argument_list|,
name|message
argument_list|)
decl_stmt|;
if|if
condition|(
name|env
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withEnv
argument_list|(
name|env
argument_list|)
expr_stmt|;
block|}
name|String
index|[]
name|entrypoint
init|=
name|DockerHelper
operator|.
name|getArrayProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_ENTRYPOINT
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|entrypoint
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withEntrypoint
argument_list|(
name|entrypoint
argument_list|)
expr_stmt|;
block|}
name|ExposedPort
index|[]
name|exposedPorts
init|=
name|DockerHelper
operator|.
name|getArrayProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_EXPOSED_PORTS
argument_list|,
name|message
argument_list|,
name|ExposedPort
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|exposedPorts
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withExposedPorts
argument_list|(
name|exposedPorts
argument_list|)
expr_stmt|;
block|}
name|HostConfig
name|hostConfig
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_HOST_CONFIG
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|HostConfig
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|hostConfig
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withHostConfig
argument_list|(
name|hostConfig
argument_list|)
expr_stmt|;
block|}
name|String
name|hostName
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_HOSTNAME
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|hostName
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withHostName
argument_list|(
name|hostName
argument_list|)
expr_stmt|;
block|}
name|Long
name|memoryLimit
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_MEMORY_LIMIT
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Long
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|memoryLimit
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|getHostConfig
argument_list|()
operator|.
name|withMemory
argument_list|(
name|memoryLimit
argument_list|)
expr_stmt|;
block|}
name|Long
name|memorySwap
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_MEMORY_SWAP
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Long
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|memorySwap
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|getHostConfig
argument_list|()
operator|.
name|withMemorySwap
argument_list|(
name|memorySwap
argument_list|)
expr_stmt|;
block|}
name|String
name|name
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_NAME
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|name
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withName
argument_list|(
name|name
argument_list|)
expr_stmt|;
block|}
name|String
index|[]
name|portSpecs
init|=
name|DockerHelper
operator|.
name|parseDelimitedStringHeader
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_PORT_SPECS
argument_list|,
name|message
argument_list|)
decl_stmt|;
if|if
condition|(
name|portSpecs
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withPortSpecs
argument_list|(
name|portSpecs
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|stdInOpen
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_STD_IN_OPEN
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|stdInOpen
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withStdinOpen
argument_list|(
name|stdInOpen
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|stdInOnce
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_STD_IN_ONCE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|stdInOnce
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withStdInOnce
argument_list|(
name|stdInOnce
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|tty
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_TTY
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|tty
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withTty
argument_list|(
name|tty
argument_list|)
expr_stmt|;
block|}
name|String
name|user
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_USER
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|user
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withUser
argument_list|(
name|user
argument_list|)
expr_stmt|;
block|}
name|Volume
index|[]
name|volume
init|=
name|DockerHelper
operator|.
name|getArrayProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_VOLUMES
argument_list|,
name|message
argument_list|,
name|Volume
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|volume
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withVolumes
argument_list|(
name|volume
argument_list|)
expr_stmt|;
block|}
name|VolumesFrom
index|[]
name|volumesFrom
init|=
name|DockerHelper
operator|.
name|getArrayProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_VOLUMES_FROM
argument_list|,
name|message
argument_list|,
name|VolumesFrom
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|volumesFrom
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|getHostConfig
argument_list|()
operator|.
name|withVolumesFrom
argument_list|(
name|volumesFrom
argument_list|)
expr_stmt|;
block|}
name|String
name|workingDir
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_WORKING_DIR
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|workingDir
operator|!=
literal|null
condition|)
block|{
name|createContainerCmd
operator|.
name|withWorkingDir
argument_list|(
name|workingDir
argument_list|)
expr_stmt|;
block|}
return|return
name|createContainerCmd
return|;
block|}
comment|/**      * Produces a diff container request      *      * @param client      * @param message      * @return      */
DECL|method|executeDiffContainerRequest (DockerClient client, Message message)
specifier|private
name|ContainerDiffCmd
name|executeDiffContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Diff Container Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|containerId
argument_list|,
literal|"Container ID must be specified"
argument_list|)
expr_stmt|;
name|ContainerDiffCmd
name|diffContainerCmd
init|=
name|client
operator|.
name|containerDiffCmd
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
name|String
name|containerIdDiff
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID_DIFF
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|containerIdDiff
operator|!=
literal|null
condition|)
block|{
name|diffContainerCmd
operator|.
name|withContainerId
argument_list|(
name|containerIdDiff
argument_list|)
expr_stmt|;
block|}
return|return
name|diffContainerCmd
return|;
block|}
comment|/**      * Produce a inspect container request      *      * @param client      * @param message      * @return      */
DECL|method|executeInspectContainerRequest (DockerClient client, Message message)
specifier|private
name|InspectContainerCmd
name|executeInspectContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Inspect Container Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|containerId
argument_list|,
literal|"Container ID must be specified"
argument_list|)
expr_stmt|;
name|InspectContainerCmd
name|inspectContainerCmd
init|=
name|client
operator|.
name|inspectContainerCmd
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
return|return
name|inspectContainerCmd
return|;
block|}
comment|/**      * Produces a kill container request      *      * @param client      * @param message      * @return      */
DECL|method|executeKillContainerRequest (DockerClient client, Message message)
specifier|private
name|KillContainerCmd
name|executeKillContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Kill Container Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|containerId
argument_list|,
literal|"Container ID must be specified"
argument_list|)
expr_stmt|;
name|KillContainerCmd
name|killContainerCmd
init|=
name|client
operator|.
name|killContainerCmd
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
name|String
name|signal
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_SIGNAL
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|signal
operator|!=
literal|null
condition|)
block|{
name|killContainerCmd
operator|.
name|withSignal
argument_list|(
name|signal
argument_list|)
expr_stmt|;
block|}
return|return
name|killContainerCmd
return|;
block|}
comment|/**      * Produces a list containers request      *      * @param client      * @param message      * @return      */
DECL|method|executeListContainersRequest (DockerClient client, Message message)
specifier|private
name|ListContainersCmd
name|executeListContainersRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker List Container Request"
argument_list|)
expr_stmt|;
name|ListContainersCmd
name|listContainersCmd
init|=
name|client
operator|.
name|listContainersCmd
argument_list|()
decl_stmt|;
name|String
name|before
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_BEFORE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|before
operator|!=
literal|null
condition|)
block|{
name|listContainersCmd
operator|.
name|withBefore
argument_list|(
name|before
argument_list|)
expr_stmt|;
block|}
name|Integer
name|limit
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_LIMIT
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Integer
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|limit
operator|!=
literal|null
condition|)
block|{
name|listContainersCmd
operator|.
name|withLimit
argument_list|(
name|limit
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|showAll
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_SHOW_ALL
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|showAll
operator|!=
literal|null
condition|)
block|{
name|listContainersCmd
operator|.
name|withShowAll
argument_list|(
name|showAll
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|showSize
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_SHOW_SIZE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|showSize
operator|!=
literal|null
condition|)
block|{
name|listContainersCmd
operator|.
name|withShowSize
argument_list|(
name|showSize
argument_list|)
expr_stmt|;
block|}
name|String
name|since
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_SINCE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|since
operator|!=
literal|null
condition|)
block|{
name|listContainersCmd
operator|.
name|withSince
argument_list|(
name|since
argument_list|)
expr_stmt|;
block|}
return|return
name|listContainersCmd
return|;
block|}
comment|/**      * Produces a pause container request      *      * @param client      * @param message      * @return      */
DECL|method|executePauseContainerRequest (DockerClient client, Message message)
specifier|private
name|PauseContainerCmd
name|executePauseContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Pause Container Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|containerId
argument_list|,
literal|"Container ID must be specified"
argument_list|)
expr_stmt|;
name|PauseContainerCmd
name|pauseContainerCmd
init|=
name|client
operator|.
name|pauseContainerCmd
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
return|return
name|pauseContainerCmd
return|;
block|}
comment|/**      * Produces a remove container request      *      * @param client      * @param message      * @return      */
DECL|method|executeRemoveContainerRequest (DockerClient client, Message message)
specifier|private
name|RemoveContainerCmd
name|executeRemoveContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Remove Container Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|containerId
argument_list|,
literal|"Container ID must be specified"
argument_list|)
expr_stmt|;
name|RemoveContainerCmd
name|removeContainerCmd
init|=
name|client
operator|.
name|removeContainerCmd
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
name|Boolean
name|force
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_FORCE
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|force
operator|!=
literal|null
condition|)
block|{
name|removeContainerCmd
operator|.
name|withForce
argument_list|(
name|force
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|removeVolumes
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_REMOVE_VOLUMES
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|removeVolumes
operator|!=
literal|null
condition|)
block|{
name|removeContainerCmd
operator|.
name|withRemoveVolumes
argument_list|(
name|removeVolumes
argument_list|)
expr_stmt|;
block|}
return|return
name|removeContainerCmd
return|;
block|}
comment|/**      * Produces a restart container request      *      * @param client      * @param message      * @return      * @throws DockerException      */
DECL|method|executeRestartContainerRequest (DockerClient client, Message message)
specifier|private
name|RestartContainerCmd
name|executeRestartContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
throws|throws
name|DockerException
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Restart Container Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|RestartContainerCmd
name|restartContainerCmd
init|=
name|client
operator|.
name|restartContainerCmd
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
name|Integer
name|timeout
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_TIMEOUT
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Integer
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|timeout
operator|!=
literal|null
condition|)
block|{
name|restartContainerCmd
operator|.
name|withtTimeout
argument_list|(
name|timeout
argument_list|)
expr_stmt|;
block|}
return|return
name|restartContainerCmd
return|;
block|}
comment|/**      * Produce a start container request      *      * @param client      * @param message      * @return      */
DECL|method|executeStartContainerRequest (DockerClient client, Message message)
specifier|private
name|StartContainerCmd
name|executeStartContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Start Container Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|containerId
argument_list|,
literal|"Container ID must be specified"
argument_list|)
expr_stmt|;
name|StartContainerCmd
name|startContainerCmd
init|=
name|client
operator|.
name|startContainerCmd
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
return|return
name|startContainerCmd
return|;
block|}
comment|/**      * Produces a stop container request      *      * @param client      * @param message      * @return      */
DECL|method|executeStopContainerRequest (DockerClient client, Message message)
specifier|private
name|StopContainerCmd
name|executeStopContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Stop Container Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|StopContainerCmd
name|stopContainerCmd
init|=
name|client
operator|.
name|stopContainerCmd
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
name|Integer
name|timeout
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_TIMEOUT
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Integer
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|timeout
operator|!=
literal|null
condition|)
block|{
name|stopContainerCmd
operator|.
name|withTimeout
argument_list|(
name|timeout
argument_list|)
expr_stmt|;
block|}
return|return
name|stopContainerCmd
return|;
block|}
comment|/**      * Produces a top container request      *      * @param client      * @param message      * @return      */
DECL|method|executeTopContainerRequest (DockerClient client, Message message)
specifier|private
name|TopContainerCmd
name|executeTopContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Top Container Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|containerId
argument_list|,
literal|"Container ID must be specified"
argument_list|)
expr_stmt|;
name|TopContainerCmd
name|topContainerCmd
init|=
name|client
operator|.
name|topContainerCmd
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
name|String
name|psArgs
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_PS_ARGS
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|psArgs
operator|!=
literal|null
condition|)
block|{
name|topContainerCmd
operator|.
name|withPsArgs
argument_list|(
name|psArgs
argument_list|)
expr_stmt|;
block|}
return|return
name|topContainerCmd
return|;
block|}
comment|/**      * Produces a unpause container request      *      * @param client      * @param message      * @return      */
DECL|method|executeUnpauseContainerRequest (DockerClient client, Message message)
specifier|private
name|UnpauseContainerCmd
name|executeUnpauseContainerRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Unpause Container Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|containerId
argument_list|,
literal|"Container ID must be specified"
argument_list|)
expr_stmt|;
name|UnpauseContainerCmd
name|unpauseContainerCmd
init|=
name|client
operator|.
name|unpauseContainerCmd
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
return|return
name|unpauseContainerCmd
return|;
block|}
comment|/**      * Produces a network create request      *      * @param client      * @param message      * @return      */
DECL|method|executeCreateNetworkRequest (DockerClient client, Message message)
specifier|private
name|CreateNetworkCmd
name|executeCreateNetworkRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Network Create Request"
argument_list|)
expr_stmt|;
name|String
name|networkName
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_NETWORK_NAME
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|networkName
argument_list|,
literal|"Network Name must be specified"
argument_list|)
expr_stmt|;
name|CreateNetworkCmd
name|createNetworkCmd
init|=
name|client
operator|.
name|createNetworkCmd
argument_list|()
operator|.
name|withName
argument_list|(
name|networkName
argument_list|)
decl_stmt|;
return|return
name|createNetworkCmd
return|;
block|}
comment|/**     * Produces a network remove request     *     * @param client     * @param message     * @return     */
DECL|method|executeRemoveNetworkRequest (DockerClient client, Message message)
specifier|private
name|RemoveNetworkCmd
name|executeRemoveNetworkRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Network Remove Request"
argument_list|)
expr_stmt|;
name|String
name|networkId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_NETWORK_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|networkId
argument_list|,
literal|"Network ID must be specified"
argument_list|)
expr_stmt|;
name|RemoveNetworkCmd
name|removeNetworkCmd
init|=
name|client
operator|.
name|removeNetworkCmd
argument_list|(
name|networkId
argument_list|)
decl_stmt|;
return|return
name|removeNetworkCmd
return|;
block|}
comment|/**      * Produces a network connect request      *      * @param client      * @param message      * @return      */
DECL|method|executeConnectToNetworkRequest (DockerClient client, Message message)
specifier|private
name|ConnectToNetworkCmd
name|executeConnectToNetworkRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Network Connect Request"
argument_list|)
expr_stmt|;
name|String
name|networkId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_NETWORK_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|networkId
argument_list|,
literal|"Network ID must be specified"
argument_list|)
expr_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|containerId
argument_list|,
literal|"Container ID must be specified"
argument_list|)
expr_stmt|;
name|ConnectToNetworkCmd
name|connectToNetworkCmd
init|=
name|client
operator|.
name|connectToNetworkCmd
argument_list|()
operator|.
name|withNetworkId
argument_list|(
name|networkId
argument_list|)
operator|.
name|withContainerId
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
return|return
name|connectToNetworkCmd
return|;
block|}
comment|/*********************      * Exec Requests      ********************/
comment|/**      * Produces a exec create request      *      * @param client      * @param message      * @return      */
DECL|method|executeExecCreateRequest (DockerClient client, Message message)
specifier|private
name|ExecCreateCmd
name|executeExecCreateRequest
parameter_list|(
name|DockerClient
name|client
parameter_list|,
name|Message
name|message
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
literal|"Executing Docker Exec Create Request"
argument_list|)
expr_stmt|;
name|String
name|containerId
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CONTAINER_ID
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|String
operator|.
name|class
argument_list|)
decl_stmt|;
name|ObjectHelper
operator|.
name|notNull
argument_list|(
name|containerId
argument_list|,
literal|"Container ID must be specified"
argument_list|)
expr_stmt|;
name|ExecCreateCmd
name|execCreateCmd
init|=
name|client
operator|.
name|execCreateCmd
argument_list|(
name|containerId
argument_list|)
decl_stmt|;
name|Boolean
name|attachStdIn
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_ATTACH_STD_IN
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
name|Boolean
name|attachStdErr
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_ATTACH_STD_ERR
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|attachStdErr
operator|!=
literal|null
condition|)
block|{
name|execCreateCmd
operator|.
name|withAttachStderr
argument_list|(
name|attachStdErr
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|attachStdIn
operator|!=
literal|null
condition|)
block|{
name|execCreateCmd
operator|.
name|withAttachStdin
argument_list|(
name|attachStdIn
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|attachStdOut
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_ATTACH_STD_OUT
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|attachStdOut
operator|!=
literal|null
condition|)
block|{
name|execCreateCmd
operator|.
name|withAttachStdout
argument_list|(
name|attachStdOut
argument_list|)
expr_stmt|;
block|}
name|String
index|[]
name|cmd
init|=
name|DockerHelper
operator|.
name|parseDelimitedStringHeader
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_CMD
argument_list|,
name|message
argument_list|)
decl_stmt|;
if|if
condition|(
name|cmd
operator|!=
literal|null
condition|)
block|{
name|execCreateCmd
operator|.
name|withCmd
argument_list|(
name|cmd
argument_list|)
expr_stmt|;
block|}
name|Boolean
name|tty
init|=
name|DockerHelper
operator|.
name|getProperty
argument_list|(
name|DockerConstants
operator|.
name|DOCKER_TTY
argument_list|,
name|configuration
argument_list|,
name|message
argument_list|,
name|Boolean
operator|.
name|class
argument_list|)
decl_stmt|;
if|if
condition|(
name|tty
operator|!=
literal|null
condition|)
block|{
name|execCreateCmd
operator|.
name|withTty
argument_list|(
name|tty
argument_list|)
expr_stmt|;
block|}
return|return
name|execCreateCmd
return|;
block|}
annotation|@
name|Override
DECL|method|doStop ()
specifier|protected
name|void
name|doStop
parameter_list|()
throws|throws
name|Exception
block|{
name|super
operator|.
name|doStop
argument_list|()
expr_stmt|;
block|}
block|}
end_class

end_unit

